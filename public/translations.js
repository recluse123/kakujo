const translations = {
    ja: {
        'nav.services': 'サービス',
        'nav.projects': 'プロジェクト',
        'nav.contact': 'お問い合わせ',
        'hero.title': 'テクノロジーと旅の融合',
        'hero.subtitle': '革新的なITソリューションと旅行体験を提供します',
        'hero.dynamic': [
            'テクノロジーで世界を繋ぐ',
            'グローバルなビジネスをサポート',
            '未来を創造する',
            'デジタルトランスフォーメーションを推進'
        ],
        'services.title': 'サービス内容',
        'services.homestay': {
            title: '民宿',
            description: '快適な宿泊体験を提供'
        },
        'services.visa': {
            title: 'ビザ申請',
            description: 'ビザ申請サポートサービス'
        },
        'services.charter': {
            title: '観光チャーター',
            description: '観光チャーターサービス'
        },
        'services.it': {
            title: 'IT開発',
            description: 'IT開発・システム構築'
        },
        'services.realestate': {
            title: '不動産仲介',
            description: '不動産仲介サービス'
        },
        'projects.title': 'プロジェクト事例',
        'projects.ec': {
            title: 'ECサイト開発',
            description: '越境ECプラットフォーム構築'
        },
        'projects.travel': {
            title: '旅行予約システム',
            description: '民宿・チャーター予約プラットフォーム'
        },
        'projects.game': {
            title: 'ゲームアプリ',
            description: 'モバイルゲーム開発'
        },
        'projects.sns': {
            title: 'SNSマーケティング',
            description: '小红书での旅行プロモーション'
        },
        'contact.title': 'お問い合わせ',
        'contact.name': 'お名前',
        'contact.email': 'メールアドレス',
        'contact.message': 'メッセージ',
        'contact.submit': '送信',
        'contact.validation.name': 'お名前を入力してください。',
        'contact.validation.email': '有効なメールアドレスを入力してください。',
        'contact.validation.message': 'メッセージを入力してください。',
        'contact.sending': '送信中...',
        'contact.success': 'お問い合わせありがとうございます。\n担当者より折り返しご連絡いたします。',
        'contact.error': '送信に失敗しました。\nしばらくしてから再度お試しください。',
        'contact.email.subject': '【格序商事】お問い合わせ',
        'contact.email.label.name': 'お名前',
        'contact.email.label.email': 'メールアドレス',
        'contact.email.label.message': 'メッセージ',
        'contact.line-app': 'LINEアプリで開く',
        'contact.wechat-app': 'WeChatアプリで開く',
        'contact.phone-call': '電話でお問い合わせ',
        'detail.overview': '概要',
        'detail.features': '特徴',
        'detail.gallery': 'ギャラリー',
        'detail.contact': 'お問い合わせ',
        'detail.contact-text': 'ご質問やご相談がございましたら、お気軽にお問い合わせください。',
        'detail.contact-button': 'お問い合わせフォームへ',
        'footer.copyright': '© 2025 格序商事 Kakujo Corp. All rights reserved.'
    },
    zh: {
        'nav.services': '服务',
        'nav.projects': '项目',
        'nav.contact': '联系我们',
        'hero.title': '科技与旅行的完美融合',
        'hero.subtitle': '提供创新的IT解决方案和旅行体验',
        'hero.dynamic': [
            '用科技连接世界',
            '支持全球业务发展',
            '创造未来',
            '推动数字化转型'
        ],
        'services.title': '服务内容',
        'services.homestay': {
            title: '民宿',
            description: '提供舒适的住宿体验'
        },
        'services.visa': {
            title: '签证申请',
            description: '签证申请支持服务'
        },
        'services.charter': {
            title: '旅游包车',
            description: '观光包车服务'
        },
        'services.it': {
            title: 'IT开发',
            description: 'IT开发与系统构建'
        },
        'services.realestate': {
            title: '不动产中介',
            description: '不动产中介服务'
        },
        'projects.title': '项目案例',
        'projects.ec': {
            title: '跨境电商开发',
            description: '跨境电子商务平台构建'
        },
        'projects.travel': {
            title: '旅行预订系统',
            description: '民宿和包车预订平台'
        },
        'projects.game': {
            title: '游戏应用',
            description: '移动游戏开发'
        },
        'projects.sns': {
            title: '社交媒体营销',
            description: '小红书旅游推广'
        },
        'contact.title': '联系我们',
        'contact.name': '姓名',
        'contact.email': '电子邮箱',
        'contact.message': '留言内容',
        'contact.submit': '发送',
        'contact.validation.name': '请输入姓名。',
        'contact.validation.email': '请输入有效的电子邮箱地址。',
        'contact.validation.message': '请输入留言内容。',
        'contact.sending': '发送中...',
        'contact.success': '感谢您的咨询。\n我们会尽快与您联系。',
        'contact.error': '发送失败。\n请稍后重试。',
        'contact.email.subject': '【格序商事】咨询',
        'contact.email.label.name': '姓名',
        'contact.email.label.email': '电子邮箱',
        'contact.email.label.message': '留言内容',
        'contact.line-app': '打开 LINE',
        'contact.wechat-app': '打开 微信',
        'contact.phone-call': '电话咨询',
        'detail.overview': '概述',
        'detail.features': '特点',
        'detail.gallery': '图片展示',
        'detail.contact': '联系我们',
        'detail.contact-text': '如有任何问题或咨询，请随时与我们联系。',
        'detail.contact-button': '前往联系表单',
        'footer.copyright': '© 2025 格序商事 Kakujo Corp. 版权所有'
    },
    en: {
        'nav.services': 'Services',
        'nav.projects': 'Projects',
        'nav.contact': 'Contact',
        'hero.title': 'Technology Meets Travel',
        'hero.subtitle': 'Providing innovative IT solutions and travel experiences',
        'hero.dynamic': [
            'Connecting the world with technology',
            'Supporting global business',
            'Creating the future',
            'Driving digital transformation'
        ],
        'services.title': 'Our Services',
        'services.homestay': {
            title: 'Homestay',
            description: 'Comfortable accommodation experiences'
        },
        'services.visa': {
            title: 'Visa Application',
            description: 'Visa application support services'
        },
        'services.charter': {
            title: 'Tour Charter',
            description: 'Sightseeing charter services'
        },
        'services.it': {
            title: 'IT Development',
            description: 'IT development and system construction'
        },
        'services.realestate': {
            title: 'Real Estate',
            description: 'Real estate brokerage services'
        },
        'projects.title': 'Our Projects',
        'projects.ec': {
            title: 'E-commerce Development',
            description: 'Cross-border e-commerce platform'
        },
        'projects.travel': {
            title: 'Travel Booking System',
            description: 'Homestay and charter booking platform'
        },
        'projects.game': {
            title: 'Game App',
            description: 'Mobile game development'
        },
        'projects.sns': {
            title: 'Social Media Marketing',
            description: 'Xiaohongshu travel promotion'
        },
        'contact.title': 'Contact Us',
        'contact.name': 'Name',
        'contact.email': 'Email',
        'contact.message': 'Message',
        'contact.submit': 'Submit',
        'contact.validation.name': 'Please enter your name.',
        'contact.validation.email': 'Please enter a valid email address.',
        'contact.validation.message': 'Please enter your message.',
        'contact.sending': 'Sending...',
        'contact.success': 'Thank you for your inquiry.\nWe will contact you soon.',
        'contact.error': 'Failed to send.\nPlease try again later.',
        'contact.email.subject': '【Kakujo Corp.】Inquiry',
        'contact.email.label.name': 'Name',
        'contact.email.label.email': 'Email',
        'contact.email.label.message': 'Message',
        'contact.line-app': 'Open in LINE',
        'contact.wechat-app': 'Open in WeChat',
        'contact.phone-call': 'Call Us',
        'detail.overview': 'Overview',
        'detail.features': 'Features',
        'detail.gallery': 'Gallery',
        'detail.contact': 'Contact Us',
        'detail.contact-text': 'If you have any questions or inquiries, please feel free to contact us.',
        'detail.contact-button': 'Go to Contact Form',
        'footer.copyright': '© 2025 格序商事 Kakujo Corp. All rights reserved.'
    }
};

let currentLang = 'ja';

function changeLanguage(lang) {
    currentLang = lang;
    document.documentElement.lang = lang;
    
    // 保存语言偏好
    saveLanguage(lang);
    
    // 更新所有带有data-i18n属性的元素
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        const translation = translations[lang][key];
        if (translation) {
            if (typeof translation === 'object') {
                const h3 = element.querySelector('h3');
                const p = element.querySelector('p');
                if (h3) h3.textContent = translation.title;
                if (p) p.textContent = translation.description;
            } else {
                element.textContent = translation;
            }
        }
    });

    // 更新所有带有data-i18n-placeholder属性的元素
    document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
        const key = element.getAttribute('data-i18n-placeholder');
        const translation = translations[lang][key];
        if (translation) {
            element.placeholder = translation;
        }
    });

    // 更新语言切换按钮状态
    document.querySelectorAll('.language-switcher button').forEach(button => {
        button.classList.remove('active');
        if (button.textContent.toLowerCase().includes(lang)) {
            button.classList.add('active');
        }
    });
    
    // 更新动态文本（如果已初始化）
    if (typeof updateDynamicTextLanguage === 'function') {
        updateDynamicTextLanguage();
    }
}

// 从localStorage获取保存的语言偏好，如果没有则使用默认语言
function getSavedLanguage() {
    const savedLang = localStorage.getItem('preferredLanguage');
    return savedLang && translations[savedLang] ? savedLang : 'ja';
}

// 保存语言偏好
function saveLanguage(lang) {
    localStorage.setItem('preferredLanguage', lang);
}

// 页面加载时初始化语言
document.addEventListener('DOMContentLoaded', () => {
    const lang = getSavedLanguage();
    changeLanguage(lang);
}); 